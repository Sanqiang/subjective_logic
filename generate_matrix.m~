%add_column: if true add column otherwise add column row
%all idx if 0 ignore, therwise concrete index, percentage is how much
%percentage want to meet
function new_matrix = generate_matrix(old_matrix,add_column, percentage,... 
                                        agreement_col_idx, disagreement_col_idx,...
                                        agreement_row_idx,disagreement_row_idx)

n_reviewer = size(old_matrix,2);
n_aspect = size(old_matrix,1);

if add_column
    if agreement_col_idx > 0
        target_col = old_matrix(:,agreement_col_idx);
        n_target_col = length(target_col);
        idxs_same = datasample(1:n_target_col,round(n_target_col*percentage));
        idxs_diff = setdiff(1:n_target_col,idxs_same);
        target_col(idxs_diff) = ~target_col(idxs_diff);
        old_matrix(:,n_reviewer+1) = target_col;
    elseif disagreement_col_idx > 0
        target_col = old_matrix(:,disagreement_col_idx);
        n_target_col = length(target_col);
        idxs_same = datasample(1:n_target_col,round(n_target_col*percentage));
        idxs_diff = setdiff(1:n_target_col,idxs_same);
        target_col(idxs_same) = ~target_col(idxs_same);
        old_matrix(:,n_reviewer+1) = target_col;
    else
        
    end
else
    

end

new_matrix = old_matrix;

end